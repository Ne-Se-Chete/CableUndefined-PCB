Version 4
SHEET 1 2580 2932
WIRE 368 -1168 304 -1168
WIRE 464 -1168 448 -1168
WIRE 736 -1168 688 -1168
WIRE 832 -1168 816 -1168
WIRE 1072 -1168 1024 -1168
WIRE 1168 -1168 1152 -1168
WIRE 1408 -1168 1344 -1168
WIRE 1504 -1168 1488 -1168
WIRE 1760 -1168 1696 -1168
WIRE 2032 -1168 2032 -1200
WIRE 2032 -1168 2016 -1168
WIRE 2080 -1168 2032 -1168
WIRE 2032 -1152 2032 -1168
WIRE 352 -1024 320 -1024
WIRE 464 -1024 432 -1024
WIRE -576 -672 -656 -672
WIRE -384 -672 -464 -672
WIRE -656 -640 -656 -672
WIRE -464 -640 -464 -672
WIRE 96 -560 -16 -560
WIRE 352 -560 96 -560
WIRE -16 -544 -16 -560
WIRE 352 -544 352 -560
WIRE -656 -480 -656 -560
WIRE -560 -480 -656 -480
WIRE -464 -480 -464 -560
WIRE -464 -480 -560 -480
WIRE 96 -480 96 -560
WIRE 464 -480 464 -496
WIRE -560 -464 -560 -480
WIRE -16 -464 -32 -464
WIRE 48 -464 -16 -464
WIRE 352 -464 336 -464
WIRE 416 -464 352 -464
WIRE 160 -384 96 -384
WIRE 240 -384 224 -384
WIRE 464 -384 240 -384
WIRE -320 -320 -320 -336
WIRE -320 -320 -416 -320
WIRE -416 -304 -416 -320
WIRE -496 -288 -608 -288
WIRE 1504 -288 1504 -304
WIRE 1504 -288 1312 -288
WIRE -608 -272 -608 -288
WIRE 1312 -272 1312 -288
WIRE 144 -256 144 -272
WIRE -320 -224 -320 -320
WIRE -416 -208 -416 -224
WIRE -368 -208 -416 -208
WIRE -736 -192 -784 -192
WIRE -656 -192 -736 -192
WIRE 1504 -192 1504 -288
WIRE -736 -176 -736 -192
WIRE 240 -176 240 -384
WIRE 1312 -176 1312 -192
WIRE 1456 -176 1312 -176
WIRE 144 -160 144 -176
WIRE 144 -160 80 -160
WIRE 192 -160 144 -160
WIRE -496 -144 -496 -288
WIRE -416 -144 -416 -208
WIRE -416 -144 -496 -144
WIRE 1312 -112 1312 -176
WIRE -320 -80 -320 -128
WIRE 1504 -80 1504 -96
WIRE -736 -64 -736 -96
WIRE -608 -64 -608 -176
WIRE -608 -64 -736 -64
WIRE 1184 -32 1136 -32
WIRE 1264 -32 1184 -32
WIRE -608 -16 -608 -64
WIRE 1184 -16 1184 -32
WIRE 1184 96 1184 64
WIRE 1312 96 1312 -16
WIRE 1312 96 1184 96
WIRE 1648 128 1648 96
WIRE 1648 128 1584 128
WIRE -640 144 -640 96
WIRE -544 144 -640 144
WIRE 1312 144 1312 96
WIRE 1584 144 1584 128
WIRE -640 176 -640 144
WIRE -544 272 -544 144
WIRE -816 320 -992 320
WIRE -640 320 -640 256
WIRE -640 320 -816 320
WIRE -560 320 -640 320
WIRE -320 320 -320 0
WIRE -320 320 -464 320
WIRE -144 320 -320 320
WIRE 240 320 240 -80
WIRE 240 320 -144 320
WIRE 560 320 240 320
WIRE 1504 320 1504 0
WIRE 1504 320 560 320
WIRE 1808 320 1504 320
WIRE 1952 320 1808 320
WIRE -992 352 -992 320
WIRE 1808 384 1808 320
WIRE 240 400 240 320
WIRE 1952 400 1952 320
WIRE -992 464 -992 432
WIRE 16 480 -64 480
WIRE 112 480 16 480
WIRE 192 480 112 480
WIRE 112 496 112 480
WIRE 1808 512 1808 464
WIRE 1952 512 1952 480
WIRE 1952 512 1808 512
WIRE 1584 544 1584 464
WIRE 1808 544 1808 512
WIRE 112 608 112 576
WIRE 240 608 240 496
WIRE 240 608 112 608
WIRE 240 656 240 608
FLAG -560 -464 0
FLAG -576 -672 3.3V
FLAG -384 -672 5V
FLAG 240 656 0
FLAG 16 480 EN_GND
FLAG 560 320 MAIN_BUS
FLAG -144 320 MAIN_BUS
FLAG 1504 -304 3.3V
FLAG -320 -336 5V
FLAG -640 96 3.3V
FLAG -816 320 PORTFC
FLAG -784 -192 EN_5V_logic
FLAG -608 -16 0
FLAG 1584 96 5V
FLAG 1584 544 0
FLAG 1312 144 0
FLAG 1136 -32 EN_3V3_logic
FLAG 1648 96 3.3V
FLAG -992 464 0
FLAG 1808 544 0
FLAG 304 -1168 EN_5V_logic
FLAG 688 -1168 EN_3V3_logic
FLAG 1024 -1168 EN_3V3
FLAG 1344 -1168 EN_5V
FLAG 1696 -1168 EN_GND
FLAG 2016 -1168 PORTFC
FLAG 2032 -1072 0
FLAG -32 -464 EN_3V3
FLAG 336 -464 EN_5V
FLAG -16 -560 3.3V
FLAG 464 -496 5V
FLAG 320 -1024 EN
FLAG 464 -1168 0
FLAG 832 -1168 0
FLAG 1840 -1168 0
FLAG 1168 -1168 3.3V
FLAG 1504 -1168 0
FLAG 80 -160 EN
FLAG 144 -272 3.3V
FLAG 464 -1024 0
SYMBOL voltage -656 -656 R0
WINDOW 0 7 16 Left 2
WINDOW 3 8 98 Left 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V1
SYMATTR Value 3.3
SYMBOL voltage -464 -656 R0
WINDOW 0 6 14 Left 2
WINDOW 3 4 93 Left 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V2
SYMATTR Value 5
SYMBOL res 96 480 R0
SYMATTR InstName R1
SYMATTR Value 100k
SYMBOL res 128 -272 R0
SYMATTR InstName R3
SYMATTR Value 100k
SYMBOL res 1296 -288 R0
SYMATTR InstName R4
SYMATTR Value 100k
SYMBOL res 1488 -96 R0
SYMATTR InstName R5
SYMATTR Value 4.7k
SYMBOL pmos -368 -128 M180
SYMATTR InstName M6
SYMATTR Value Si7137DP
SYMBOL res -432 -320 R0
SYMATTR InstName R6
SYMATTR Value 100k
SYMBOL nmos -656 -272 R0
SYMATTR InstName M7
SYMATTR Value IRF6623
SYMBOL res -336 -96 R0
SYMATTR InstName R7
SYMATTR Value 1.5k
SYMBOL nmos -464 272 R90
SYMATTR InstName M8
SYMATTR Value IRF6623
SYMBOL res -624 160 M0
SYMATTR InstName R9
SYMATTR Value 1.5k
SYMBOL res -752 -192 R0
WINDOW 0 34 51 Left 2
SYMATTR InstName R16
SYMATTR Value 100k
SYMBOL res 1568 128 R0
SYMATTR InstName RLOAD_UP
SYMATTR Value 1
SYMBOL res 1568 368 R0
SYMATTR InstName RLOAD_DN
SYMATTR Value 10
SYMBOL nmos 192 400 R0
SYMATTR InstName M1
SYMATTR Value IRF6623
SYMBOL pmos 192 -80 M180
SYMATTR InstName M2
SYMATTR Value Si7137DP
SYMBOL pmos 1456 -96 M180
SYMATTR InstName M5
SYMATTR Value Si7137DP
SYMBOL nmos 1264 -112 R0
SYMATTR InstName M10
SYMATTR Value IRF6623
SYMBOL res 1168 -32 R0
WINDOW 0 34 51 Left 2
SYMATTR InstName R18
SYMATTR Value 100k
SYMBOL voltage 2176 240 R0
WINDOW 0 7 16 Left 2
WINDOW 3 8 98 Left 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V3
SYMATTR Value PULSE(0 3.3 0 10n 10n 20u 40u)
SYMBOL res 1792 368 R0
SYMATTR InstName R14
SYMATTR Value 470k
SYMBOL voltage -992 336 R0
WINDOW 0 7 16 Left 2
WINDOW 3 8 98 Left 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V4
SYMATTR Value PULSE(0 3.3 0 10n 10n 20u 40u)
SYMBOL voltage 2176 368 R0
WINDOW 0 7 16 Left 2
WINDOW 3 8 98 Left 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V5
SYMATTR Value PULSE(0 5 0 10n 10n 20u 40u)
SYMBOL res 464 -1184 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R19
SYMATTR Value 100
SYMBOL res 832 -1184 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R21
SYMATTR Value 100
SYMBOL res 1168 -1184 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R22
SYMATTR Value 100
SYMBOL res 1504 -1184 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R23
SYMATTR Value 100
SYMBOL res 1856 -1184 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R24
SYMATTR Value 100
SYMBOL res 2016 -1168 R0
SYMATTR InstName R25
SYMATTR Value 1Meg
SYMBOL res -32 -560 R0
WINDOW 0 34 51 Left 2
SYMATTR InstName R2
SYMATTR Value 100k
SYMBOL res 336 -560 R0
WINDOW 0 34 51 Left 2
SYMATTR InstName R8
SYMATTR Value 100k
SYMBOL pmos 48 -384 M180
SYMATTR InstName M3
SYMATTR Value Si7137DP
SYMBOL pmos 416 -384 M180
SYMATTR InstName M4
SYMATTR Value Si7137DP
SYMBOL res 448 -1040 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R10
SYMATTR Value 100
SYMBOL schottky 224 -400 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName D2
SYMATTR Value RBR40NS60A
SYMATTR Description Diode
SYMATTR Type diode
TEXT -24 496 Left 2 ;Active 1
TEXT -608 -728 Left 2 ;Voltage sources
TEXT 1880 256 Left 2 ;Port BB
TEXT -1088 512 Left 2 !.tran 0.1m
TEXT -776 -232 Left 2 ;Active 1
TEXT 1144 -72 Left 2 ;Active 1
TEXT -656 456 Left 2 ;Level shifter
TEXT -1176 120 Left 2 ;Port of FPGA
TEXT 792 -1632 Left 5 ;Look up table
TEXT -8 -1448 Left 4 ;Power: GND
TEXT 288 -1512 Left 2 ;EN_5V_logic
TEXT 624 -1512 Left 2 ;EN_3V3_logic
TEXT 1016 -1504 Left 2 ;EN_3V3
TEXT 1384 -1512 Left 2 ;EN_5V
TEXT 1672 -1512 Left 2 ;EN_GND
TEXT 1920 -1512 Left 2 ;PORTFC
TEXT -8 -1392 Left 4 ;Power: 3V3
TEXT -8 -1344 Left 4 ;Power: 5V
TEXT -8 -1296 Left 4 ;Logic 3V3
TEXT -8 -1248 Left 4 ;Logic 5V
TEXT 336 -1448 Left 2 ;0
TEXT 672 -1448 Left 2 ;0
TEXT 1408 -1448 Left 2 ;0
TEXT 1064 -1440 Left 2 ;0
TEXT 1720 -1448 Left 2 ;1
TEXT 1960 -1448 Left 2 ;HI-Z
TEXT 1320 -1656 Left 2 ;0 = 0V
TEXT 1320 -1632 Left 2 ;1 = 3.3V
TEXT 2112 -1448 Left 2 ;Works !
TEXT 656 -1544 Left 2 ;Active 1
TEXT 312 -1544 Left 2 ;Active 1
TEXT 1376 -1552 Left 2 ;Active 1
TEXT 1016 -1544 Left 2 ;Active 1
TEXT 1672 -1552 Left 2 ;Active 1
TEXT 2112 -1400 Left 2 ;Works !
TEXT 336 -1400 Left 2 ;0
TEXT 672 -1400 Left 2 ;0
TEXT 1408 -1400 Left 2 ;0
TEXT 1064 -1392 Left 2 ;1
TEXT 1720 -1400 Left 2 ;0
TEXT 1960 -1400 Left 2 ;HI-Z
TEXT 336 -1352 Left 2 ;0
TEXT 672 -1352 Left 2 ;0
TEXT 1408 -1352 Left 2 ;1
TEXT 1064 -1344 Left 2 ;0
TEXT 1720 -1352 Left 2 ;0
TEXT 1960 -1352 Left 2 ;HI-Z
TEXT 2112 -1352 Left 2 ;Works !
TEXT 336 -1304 Left 2 ;0
TEXT 672 -1304 Left 2 ;1
TEXT 1408 -1304 Left 2 ;0
TEXT 1064 -1296 Left 2 ;0
TEXT 1720 -1304 Left 2 ;0
TEXT 1896 -1304 Left 2 ;Input or output
TEXT 2112 -1296 Left 2 ;Works, but with some issues !
TEXT 336 -1256 Left 2 ;1
TEXT 672 -1256 Left 2 ;0
TEXT 1408 -1256 Left 2 ;0
TEXT 1064 -1248 Left 2 ;0
TEXT 1720 -1256 Left 2 ;0
TEXT 1896 -1256 Left 2 ;Input or output
TEXT 2112 -1256 Left 2 ;Works, but with some issues !
LINE Normal 2080 -1472 240 -1472 2
LINE Normal 2080 -1424 240 -1424 2
LINE Normal 2080 -1376 240 -1376 2
LINE Normal 2080 -1328 240 -1328 2
LINE Normal 2080 -1280 240 -1280 2
LINE Normal 2080 -1232 240 -1232 2
LINE Normal 512 -1088 512 -1536 2
LINE Normal 896 -1088 896 -1536 2
LINE Normal 1232 -1088 1232 -1536 2
LINE Normal 1568 -1088 1568 -1536 2
LINE Normal 1872 -1088 1872 -1536 2
RECTANGLE Normal -272 -400 -704 -800 2
RECTANGLE Normal 2000 592 1552 48 2
RECTANGLE Normal -784 480 -1216 80 2
RECTANGLE Normal -448 480 -720 48 2
